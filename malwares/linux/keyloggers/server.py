import socket

s = socket.socket()
s.bind(('localhost', 1234))
s.listen(1)
conn, addr = s.accept()
print('Connected by', addr)
try:
    while True:
        data = conn.recv(1024)
        if not data:
            print('Connection closed by client.')
            break
        print('Received:', data.decode())
except KeyboardInterrupt:
    print("Server shutting down.")
finally:
    conn.close()
    s.close()
